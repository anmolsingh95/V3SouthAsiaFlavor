namespace = raj
# The Jewel in the Crown
raj.1 = {
    type = country_event
    placement = ROOT

    title = raj.1.t
    desc = raj.1.d
    flavor = raj.1.f

    duration = 3

    event_image = {
        video = "gfx/event_pictures/asia_hinduism_sikhism.bk2"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    on_opened_soundeffect = "event:/SFX/Events/asia/hinduism_sikhism"

    icon = "gfx/interface/icons/event_icons/event_scales.dds"

    minor_left_icon = c:GBR
    minor_right_icon = c:BIC

    trigger = {
    }

    immediate = {
        c:BIC = {
            save_scope_as = company_country
        }
        c:GBR = {
            save_scope_as = british_raj_country
        }
        set_variable = {
            name = british_raj_var
        }
    }

    option = {
        name = raj.1.a
        default_option = yes
        custom_tooltip = activate_british_raj
        if = {
            limit = {
                has_diplomatic_pact = {
                    who = c:BIC
                    type = dominion
                }
            }
            hidden_effect = {
                c:BIC = {
                    every_subject_or_below = {
                        every_scope_state = {
                            set_state_owner = c:BIC
                        }
                    }
                }
                remove_diplomatic_pact = {
                    country = c:BIC
                    type = dominion
                }
            }
            create_diplomatic_pact = {
                country = c:BIC
                type = puppet
            }
        }
        c:BIC = {
            set_variable = doctrine_of_lapse_ended
            if = {
                limit = {
                    NOT = {
                        has_law = law_type:law_appointed_bureaucrats
                    }
                }
                activate_law = law_type:law_appointed_bureaucrats
            }
        }
    }
}